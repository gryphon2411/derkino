# Secrets management tasks with Ansible Vault support (secure in-memory approach)

- name: Set default secrets values
  ansible.builtin.set_fact:
    vault_mongodb_root_username: "root"
    vault_mongodb_root_password: "{{ vault_mongodb_root_password | default('change_this_password') }}"
    vault_postgres_root_username: "postgres"
    vault_postgres_root_password: "{{ vault_postgres_root_password | default('change_this_password') }}"
    vault_redis_default_username: "default"
    vault_redis_default_password: "{{ vault_redis_default_password | default('change_this_password') }}"
    vault_kafka_sasl_username: "root"
    vault_kafka_sasl_password: "{{ vault_kafka_sasl_password | default('change_this_password') }}"
  no_log: true

- name: Include MongoDB secrets
  ansible.builtin.include_tasks: mongodb.yml

- name: Include PostgreSQL secrets
  ansible.builtin.include_tasks: postgresql.yml

- name: Include Redis-Stack secrets
  ansible.builtin.include_tasks: redis-stack.yml

- name: Include Kafka secrets
  ansible.builtin.include_tasks: kafka.yml
