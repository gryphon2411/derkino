# Redis-Stack secrets management

- name: Create Redis-Stack namespace
  kubernetes.core.k8s:
    state: present
    definition:
      apiVersion: v1
      kind: Namespace
      metadata:
        name: redis-stack-system

- name: Create Redis-Stack Kubernetes Secret
  kubernetes.core.k8s:
    state: present
    definition:
      apiVersion: v1
      kind: Secret
      metadata:
        name: redis-default-user-credentials
        namespace: redis-system
      type: Opaque
      data:
        username: "{{ vault_redis_default_username | b64encode | default('default' | b64encode) }}"
        password: "{{ vault_redis_default_password | b64encode }}"
  no_log: true
